<!-- App: Student-friendly Pokémon Game (sections are gated step by step) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Head (Bootstrap + our CSS) -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Poké Game (Student)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-light">

  <div class="container py-4">

    <!--  Title  -->
    <header class="mb-4 text-center">
      <h1 class="display-6 fw-bold">Poké Game</h1>
      <p class="text-muted mb-0">Enter your name → choose 3 Pokémon → fight!</p>
    </header>

    <!--  Step 0: Username Gate  -->
    <section class="section-name card p-3 shadow-sm">
      <h2 class="h5">Step 1 — Your Username</h2>
      <div class="row g-2 align-items-center">
        <div class="col-12 col-md-6">
          <input id="inputName" class="form-control text-center" type="text" placeholder="Enter your username">
        </div>
        <div class="col-12 col-md-3 d-grid">
          <button id="btnShowName" class="btn btn-primary">Continue</button>
        </div>
        <div class="col-12 col-md-3 text-md-start text-center">
          <span id="errorUsernameMessage" class="text-danger small"></span>
        </div>
      </div>
      <p id="displayName" class="mt-3 text-center fw-semibold"></p>
    </section>

    <!--  Step 1: Start (choose path)  -->
    <section class="section-start card p-3 mt-3 shadow-sm hidden">
      <h2 class="h5 mb-2">Step 2 — Choose how you pick</h2>
      <div class="d-flex flex-wrap gap-2">
        <button id="btnPokeGet" class="btn btn-dark">Show 6 Starters</button>
        <button id="btnOpenDex" class="btn btn-outline-primary">Open Pokédex (search 1–151)</button>
      </div>
      <p class="text-muted small mt-2 mb-0">You can pick using 6 starters or the full Pokédex modal.</p>
    </section>

    <!--  Step 2: Selection (6 buttons)  -->
    <section class="section-selection card p-3 mt-3 shadow-sm hidden">
      <h2 class="h5 mb-3">Step 3 — Choose your 3 Pokémon</h2>

      <!-- Six option buttons (names filled by JS) -->
      <div class="row g-2 mb-3">
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption1">...</span></button>
        </div>
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption2">...</span></button>
        </div>
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption3">...</span></button>
        </div>
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption4">...</span></button>
        </div>
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption5">...</span></button>
        </div>
        <div class="col-6 col-md-4 col-lg-2 d-grid">
          <button class="btn btn-outline-primary btn-select-pokemon"><span id="pokemonOption6">...</span></button>
        </div>
      </div>

      <!-- Show the 3 selected names -->
      <div class="alert alert-secondary py-2">
        <strong>Selected:</strong> <span id="selectedPokemonsID">—</span>
      </div>

      <!-- Previews: small cards for player and opponent -->
      <div class="row g-3">
        <div class="col-12 col-lg-6">
          <div class="card h-100">
            <div class="card-header bg-primary text-white">Your Team</div>
            <div class="card-body">
              <div id="playerPokemons" class="row g-3"></div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="card h-100">
            <div class="card-header bg-danger text-white">Opponent Team</div>
            <div class="card-body">
              <div id="opponentPokemons" class="row g-3"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Hidden template used by JS to render preview cards -->
      <div id="pokemonCardTemplate" class="col-6 col-md-4 d-none">
        <div class="card text-center shadow-sm">
          <div class="ratio ratio-1x1 bg-light">
            <img src="" alt="" class="card-img-top p-2 object-fit-contain">
          </div>
          <div class="card-body p-2">
            <div class="pokemon-name text-capitalize fw-semibold small">Name</div>
          </div>
        </div>
      </div>
    </section>

    <!--  Step 3: Battle  -->
    <section class="section-battle mt-3 hidden">
      <div class="row g-3">
        <!-- Player HUD -->
        <div class="col-12 col-lg-6">
          <div class="card shadow-sm">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
              <span>Your Active Pokémon</span>
              <div class="d-flex align-items-center gap-2">
                <button id="btnPrevActive" class="btn btn-sm btn-light">Prev</button>
                <button id="btnNextActive" class="btn btn-sm btn-light">Next</button>
                <span id="battleCooldown" class="badge bg-warning text-dark d-none">Cooldown...</span>
              </div>
            </div>
            <div class="card-body">
              <div class="d-flex align-items-center gap-3">
                <img id="playerActiveImg" src="" alt="" class="battle-sprite">
                <div>
                  <div id="playerActiveName" class="h6 mb-1 text-capitalize">—</div>
                  <div class="progress mb-1" style="height: 12px;">
                    <div id="playerActiveHPBar" class="progress-bar bg-success" style="width:100%"></div>
                  </div>
                  <div id="playerActiveHPText" class="small">—</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Opponent HUD -->
        <div class="col-12 col-lg-6">
          <div class="card shadow-sm">
            <div class="card-header bg-danger text-white">Opponent Active Pokémon</div>
            <div class="card-body">
              <div class="d-flex align-items-center gap-3">
                <img id="opponentActiveImg" src="" alt="" class="battle-sprite">
                <div>
                  <div id="opponentActiveName" class="h6 mb-1 text-capitalize">—</div>
                  <div class="progress mb-1" style="height: 12px;">
                    <div id="opponentActiveHPBar" class="progress-bar bg-danger" style="width:100%"></div>
                  </div>
                  <div id="opponentActiveHPText" class="small">—</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Pokedex (shows your active) -->
        <div class="col-12 col-lg-4">
          <div class="card h-100 shadow-sm">
            <div class="card-header">Pokédex</div>
            <div class="card-body">
              <div class="text-center mb-2">
                <img id="playerPokedexImg" src="" alt="" class="pokedex-img">
                <div id="playerPokedexName" class="fw-semibold mt-2 text-capitalize">—</div>
                <div id="playerPokedexHPText" class="small text-muted">—</div>
              </div>
              <ul id="playerPokedexMoves" class="list-group small"></ul>
            </div>
          </div>
        </div>

        <!-- Actions and battle log -->
        <div class="col-12 col-lg-8">
          <div class="card h-100 shadow-sm">
            <div class="card-header">Actions</div>
            <div class="card-body">
              <div class="d-flex flex-wrap gap-2 mb-3">
                <button id="btnFight" class="btn btn-outline-primary">Fight</button>
                <button id="btnSwitch" class="btn btn-outline-secondary">Pokémon</button>
                <button id="btnBag" class="btn btn-outline-success">Bag</button>
                <button id="btnRun" class="btn btn-outline-dark">Run</button>
              </div>
              <div id="actionPanel" class="mb-3"></div>
              <div id="battleLog" class="alert alert-info py-2 mb-0">Choose: Fight or Run.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!--  Win  -->
    <section class="section-win card p-3 mt-3 text-center shadow-sm hidden">
      <h2 class="h4 text-success">You Win!</h2>
      <p class="text-muted">Your team:</p>
      <div id="winTeamGallery" class="row g-3 justify-content-center"></div>
      <button id="btnPlayAgainWin" class="btn btn-primary mt-3">Play Again</button>
    </section>

    <!--  Lose  -->
    <section class="section-lose card p-3 mt-3 text-center shadow-sm hidden">
      <h2 class="h4 text-danger">Game Over</h2>
      <p class="text-muted">Try again!</p>
      <button id="btnPlayAgainLose" class="btn btn-primary mt-1">Play Again</button>
    </section>
  </div>

  <!--  Pokédex Modal (search + choose 3)  -->
  <div class="modal fade" id="dexModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Pokédex (Kanto 1–151)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input id="inputDexSearch" class="form-control mb-3" placeholder="Search by name...">
          <div id="dexGrid" class="row g-3"></div>
        </div>
        <div class="modal-footer d-flex justify-content-between">
          <div class="text-muted">
            Selected: <span id="dexSelectedCount">0 / 3</span>
          </div>
          <div class="d-flex gap-2">
            <button id="btnDexClear" class="btn btn-outline-secondary">Clear</button>
            <button id="btnDexConfirm" class="btn btn-primary" disabled>Confirm (3)</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./script/game.js"></script>
</body>
</html>
